'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = Organization;

var _common = require('./common');

var _common2 = _interopRequireDefault(_common);

var _map = require('./map');

var _map2 = _interopRequireDefault(_map);

var _layers = require('./layers');

var _layers2 = _interopRequireDefault(_layers);

var _app = require('./app');

var _app2 = _interopRequireDefault(_app);

var _file = require('./file');

var _file2 = _interopRequireDefault(_file);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var end = require('../lib/end');

function Organization(arcgis) {
  var get = function get(id) {
    return arcgis.request({
      url: 'content/items/' + id
    });
  };

  return function getItem(itemId, cb) {
    var promise = get(itemId).then(function (i) {
      i.get = get;
      (0, _common2.default)(i, arcgis);
      if (i.type === 'Feature Service') {
        (0, _layers2.default)(i, arcgis);
      } else if (i.type === 'Application') {
        (0, _app2.default)(i, arcgis);
      } else if (i.type === 'GeoJson') {
        (0, _file2.default)(i, arcgis);
      } else if (i.type === 'Web Map') {
        (0, _map2.default)(i, arcgis);
      }
      return i;
    });

    return end(promise, cb);
  };
}